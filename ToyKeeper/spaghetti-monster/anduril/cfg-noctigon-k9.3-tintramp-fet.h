// Noctigon K9.3 tint-ramping (plus FET) config options for Anduril
#include "cfg-noctigon-k9.3-tintramp-nofet.h"
#undef MODEL_NUMBER
#define MODEL_NUMBER "0266"
// ATTINY: 1634

// enable the FET channel, even though it's ... kinda funky
#undef PWM_CHANNELS
#define PWM_CHANNELS 2

// main LEDs
//   output: 3000 lm?
//   FET: 5000 to 7500 lm
// 2nd LEDs
//   output: 1500 lm?
#define RAMP_LENGTH 150
// level_calc.py 5.01 1 130 7135 1 0.2 2000 --pwm dyn:64:16383:511
// plus a FET segment
// level_calc.py 2 1 20 7135 5 1000.0 7000 --pwm 255
// abstract ramp (power is split between both sets of LEDs)
// ','.join([str(511 - int(x*2.005)) for x in fet])
#undef PWM1_LEVELS
// append: ,501,485,469,453,433,413,391,369,345,321,295,267,237,207,177,143,108,74,38,0
#define PWM1_LEVELS 1,1,1,2,2,3,3,4,5,6,7,8,9,10,12,13,15,16,18,20,22,24,27,29,32,34,37,40,43,46,49,53,56,59,63,66,70,73,77,80,83,87,90,93,96,98,100,103,104,105,106,107,106,105,104,101,98,94,89,83,76,67,57,46,33,35,37,39,41,43,46,48,51,53,56,59,62,65,68,72,75,79,83,86,91,95,99,104,108,113,118,123,129,135,140,146,153,159,166,172,179,187,194,202,210,218,227,236,245,254,264,274,284,295,306,317,328,340,352,365,378,391,405,419,433,448,463,479,495,511,501,485,469,453,433,413,391,369,345,321,295,267,237,207,177,143,108,74,38,0
#undef PWM_TOPS
// append: ,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511
#define PWM_TOPS 16383,13233,9780,13825,9592,13434,9971,12020,12899,13192,13149,12898,12507,12022,12665,11981,12180,11421,11392,11246,11017,10730,10825,10433,10364,9926,9766,9564,9331,9075,8805,8692,8394,8095,7927,7625,7438,7142,6947,6664,6392,6202,5945,5699,5464,5186,4925,4726,4450,4194,3956,3734,3462,3212,2982,2717,2475,2230,1985,1741,1500,1244,996,755,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511,511
// prepend: 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
#define PWM2_LEVELS 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,13,21,29,39,49,60,71,83,95,108,122,137,152,167,184,201,218,236,255
#undef DEFAULT_LEVEL
#define DEFAULT_LEVEL 70
#undef MAX_1x7135
#define MAX_1x7135 130

#undef RAMP_SMOOTH_FLOOR
#define RAMP_SMOOTH_FLOOR 10  // level 1 is unreliable (?)
#undef RAMP_SMOOTH_CEIL
#define RAMP_SMOOTH_CEIL  130
// 10, 30, 50, [70], 90, 110, [130]
#undef RAMP_DISCRETE_FLOOR
#define RAMP_DISCRETE_FLOOR 10
#undef RAMP_DISCRETE_CEIL
#define RAMP_DISCRETE_CEIL  RAMP_SMOOTH_CEIL
#undef RAMP_DISCRETE_STEPS
#define RAMP_DISCRETE_STEPS 7

// safe limit highest regulated power (no FET or turbo)
#undef SIMPLE_UI_FLOOR
#define SIMPLE_UI_FLOOR RAMP_DISCRETE_FLOOR
#undef SIMPLE_UI_CEIL
#define SIMPLE_UI_CEIL RAMP_DISCRETE_CEIL
#undef SIMPLE_UI_STEPS
#define SIMPLE_UI_STEPS 5

// stop panicking at ~3000 lm
#undef THERM_FASTER_LEVEL
#define THERM_FASTER_LEVEL 130
#undef MIN_THERM_STEPDOWN
#define MIN_THERM_STEPDOWN 65  // should be above highest dyn_pwm level

// speed up party strobe; the FET is really fast
#undef PARTY_STROBE_ONTIME

